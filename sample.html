<!doctype html>
<html lang="en">
	<head>
		<meta http-equiv="X-UA-Compatible" content="IE=Edge,chorme=1" />
		<meta http-equiv="content-type" content="text/html;charset=utf-8" />
		<style type="text/css">
		html,body{
			width:100%;
			height:100%;
			padding:0;
			margin:0;
		}
		#main ul li ul{
			display:none;
		}
		li{
			list-style: none;
		}
		</style>
		<script type="text/javascript">
			var treeData=
				[
	                {
	                  name:'AAA',
	                  child:[
	                    {name:'a1',child:[{name:'a1-1'},{name:'a1-2'}]},
	                    {name:'a2'},
	                    {name:'a3',child:[{name:'a3-1'},{name:'a3-2',child:[{name:'a3-2-1'},{name:'a3-2-2'}]}]}
	                  ]
	                },
	                {
	                  name:'BBB',
	                  child:[
	                    {name:'b1'},
	                    {
	                      name:'b2',
	                      child:[
	                        {
	                          name:'b2-1'
	                        },
	                        {
	                          name:'b2-2',
	                          child:[{
	                            name:'b2-2-1'
	                          }]
	                        }
	                      ]
	                    },
	                    {name:'b3'}
	                  ]
	                },
	                {
	                  name:'CCC',
	                  child:[{name:'c1'},{name:'c2'},{name:'c3'}]
	                }
	            ];
			window.onload=function(){
				var _div=document.getElementById("main");
				menuTree.init(_div,treeData);		
			}
			var menuTree={
				init:function(_dom,data){
					_dom.appendChild(this.loadMenuTree(treeData));
					this.bind(_dom);
				},
				loadMenuTree:function(data){
					var _ul=document.createElement("ul");
					for(var i=0;i<data.length;i++){
						var _li=document.createElement("li");
						_li.innerText=data[i].name;
						if(data[i].child){
							_li.innerText=data[i].name+"+";
							_li.appendChild(this.loadMenuTree(data[i].child));
						}
						_ul.appendChild(_li);					
					}
					return _ul
				},
				bind:function(_dom){
					var _that=this;
					_dom.addEventListener("click",function(){
						if(event.target.localName=="li"&&event.target.children.length>0){
							var pnode=event.target.parentNode;
							_that.hideNode(pnode);
							event.target.children[0].style.display="block";

						}
					});
				},
				hideNode:function(pnode){
					var nodes=pnode.children;
					for(var i=0;i<nodes.length;i++){
						if(nodes[i].children.length>0){
							nodes[i].children[0].style.display="none";
							this.hideNode(nodes[i].children[0]);
						}
					}
				}

			}
		</script>
	</head>
	<body>
			<div id="main">
			</div>
	</body>
</html>
